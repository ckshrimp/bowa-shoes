import{_ as w,h as y,m as b,i as x,r as c,b as d,c as D,k as F,w as k,A as S,d as e,B,E as M,F as P,q as p,t as C,p as I,g as V}from"./index-10037a5e.js";import{M as $}from"./Modal-e3383a26.js";/* empty css                                                              */const i=n=>(I("data-v-7dd6a83f"),n=n(),V(),n),q={id:"container"},z={id:"all"},R=i(()=>e("div",{id:"title"},"會員登入",-1)),U=i(()=>e("label",{for:"email"},"信箱",-1)),A=i(()=>e("label",{for:"verification"},"驗證碼",-1)),E=i(()=>e("input",{type:"text",id:"verification-code",name:"verification",placeholder:"請填完整驗證碼"},null,-1)),N=i(()=>e("input",{class:"verification-button",type:"submit",value:"驗證"},null,-1)),T={__name:"ForgetPassword",setup(n){const v=y();b().query;const u=x("config"),s=c(""),a=c(!1),l=c(),f=async r=>{r.preventDefault();const t=new FormData(r.target),o=t.get("email"),m=t.get("verification"),h={email:o,code:m};try{(await p(h,`${u.apiUrl}/codeAuthenticate`)).result===!0?(s.value=" 驗證成功 ",a.value=!0,setTimeout(()=>{v.push({name:"SetPassword",params:{email:o},props:{email:o}})},1e3)):(error.value="驗證失敗，請檢查驗證碼",s.value="驗證失敗請檢查驗證碼",a.value=!0)}catch{s.value="驗證失敗，請檢查驗證碼入",a.value=!0}},_=async r=>{r.preventDefault();const t={email:l.value};try{(await p(t,`${u.apiUrl}/forgetPassword`)).result?(s.value=" 驗證碼已寄出 ",a.value=!0):(error.value="驗證碼寄出失敗 請重新申請",s.value="驗證碼寄出失敗 請重新申請",a.value=!0)}catch{s.value="驗證碼寄出失敗 請重新申請",a.value=!0}};return(r,t)=>(d(),D(P,null,[a.value?(d(),F($,{key:0,onClose:t[0]||(t[0]=o=>a.value=!1)},{default:k(()=>[e("p",null,C(s.value),1)]),_:1})):S("",!0),e("div",q,[e("div",z,[R,e("form",{onSubmit:f},[U,B(e("input",{type:"text",id:"verification-email",name:"email","onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),placeholder:"請填完整信箱",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$","req-ired":""},null,512),[[M,l.value]]),e("button",{class:"verification-button",onClick:_},"寄送驗證碼"),A,E,N],32)])])],64))}},K=w(T,[["__scopeId","data-v-7dd6a83f"]]);export{K as default};
