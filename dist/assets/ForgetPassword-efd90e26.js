import{_ as w,h as y,m as b,i as x,r as c,b as d,c as D,k as F,w as k,A as B,d as e,B as M,E as P,F as S,q as p,t as C,p as I,g as V}from"./index-bb11416d.js";import{M as $}from"./Modal-721e8b5c.js";/* empty css                                                              */const r=n=>(I("data-v-2594eac9"),n=n(),V(),n),q={id:"container"},z={id:"all"},R=r(()=>e("div",{id:"title"},"會員登入",-1)),U=r(()=>e("label",{for:"email"},"信箱",-1)),A=r(()=>e("label",{for:"verification"},"驗證碼",-1)),E=r(()=>e("input",{type:"text",id:"verification-code",name:"verification",placeholder:"請填完整驗證碼"},null,-1)),N=r(()=>e("input",{class:"verification-button",type:"submit",value:"驗證"},null,-1)),T={__name:"ForgetPassword",setup(n){const v=y();b().query;const u=x("config"),s=c(""),a=c(!1),l=c(),_=async i=>{i.preventDefault();const t=new FormData(i.target),o=t.get("email"),f=t.get("verification"),h={email:o,code:f};try{(await p(h,`${u.apiUrl}/codeAuthenticate`)).result?(s.value=" 驗證成功 ",a.value=!0,setTimeout(()=>{v.push({name:"setPassword",params:{email:o},props:{email:o}})},1500)):(error.value="驗證失敗，請檢查驗證碼",s.value="驗證失敗請檢查驗證碼",a.value=!0)}catch{s.value="驗證失敗，請檢查驗證碼入",a.value=!0}},m=async i=>{i.preventDefault();const t={email:l.value};try{(await p(t,`${u.apiUrl}/forgetPassword`)).result?(s.value=" 驗證碼已寄出 ",a.value=!0):(error.value="驗證碼寄出失敗 請重新申請",s.value="驗證碼寄出失敗 請重新申請",a.value=!0)}catch{s.value="驗證碼寄出失敗 請重新申請",a.value=!0}};return(i,t)=>(d(),D(S,null,[a.value?(d(),F($,{key:0,onClose:t[0]||(t[0]=o=>a.value=!1)},{default:k(()=>[e("p",null,C(s.value),1)]),_:1})):B("",!0),e("div",q,[e("div",z,[R,e("form",{onSubmit:_},[U,M(e("input",{type:"text",id:"verification-email",name:"email","onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),placeholder:"請填完整信箱",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$","req-ired":""},null,512),[[P,l.value]]),e("button",{class:"verification-button",onClick:m},"寄送驗證碼"),A,E,N],32)])])],64))}},K=w(T,[["__scopeId","data-v-2594eac9"]]);export{K as default};
