import{i as h,r as i,h as w,s as M,b as m,c as N,k as C,w as a,d as t,t as k,A as y,v as s,f as B,l as u,F as D,j as F}from"./index-bb11416d.js";import{u as x}from"./store-f4a3a2de.js";import{M as V}from"./Modal-721e8b5c.js";/* empty css                                                                */const P={id:"MemberNav-nav"},S=t("i",{class:"fa fa-bars"},null,-1),L={__name:"MemberNavBar",setup(j){const d=h("config"),l=i(!1);w();const r=i(""),o=i(!1),f=async e=>{try{v.updateCartData(e),console.log("%c 已更新本地購物車資料","color: white; font-weight: bold")}catch{console.log("%c更新本地資料失敗","color: white; font-weight: bold")}},b=async e=>{try{v.updatePriceData(e),console.log("%c 已更新本地購物車資料","color: white; font-weight: bold")}catch{console.log("%c 更新本地資料失敗","color: white; font-weight: bold")}},g=()=>{l.value=!l.value},v=x(),p=async()=>{try{let{result:e}=await F(`${d.apiUrl}/logout`);e===!0?(await f([]),await b({}),r.value="登出成功 自動跳轉到首頁",o.value=!0,setTimeout(()=>{window.location.href="/"},2e3)):(r.value="登出失敗",o.value=!0)}catch{r.value="登出失敗",o.value=!0}},_=e=>{l.value=!1};return(e,n)=>{const c=M("router-link");return m(),N(D,null,[o.value?(m(),C(V,{key:0,onClose:n[0]||(n[0]=T=>o.value=!1)},{default:a(()=>[t("p",null,k(r.value),1)]),_:1})):y("",!0),t("div",P,[t("div",{class:"menu-toggle MemberNav-button",onClick:g},[s(" 會員服務 "),S]),t("ul",{id:"MemberNav-navList",class:B({active:l.value})},[t("div",{class:"MemberNav-button goBack",onClick:_}," X"),u(c,{to:"/memberCenter",class:"center MemberNav-button"},{default:a(()=>[s("會員中心")]),_:1}),u(c,{to:"/memberProfile",class:"detail MemberNav-button"},{default:a(()=>[s("會員資料")]),_:1}),u(c,{to:"/memberFavor",class:"favor MemberNav-button"},{default:a(()=>[s("我的收藏")]),_:1}),u(c,{to:"/recipient",class:"recipient MemberNav-button"},{default:a(()=>[s("我的訂單")]),_:1}),t("div",{class:"logout MemberNav-button",onClick:p},"登出")],2)])],64)}}};export{L as _};
