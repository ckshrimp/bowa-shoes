import{_ as V,i as x,k as B,r as l,y as D,z as F,o as L,m as G,b as c,c as f,A,w as E,B as h,d as e,h as j,J as q,t as r,C as w,G as I,D as z,F as J,p as R,g as T,q as $}from"./index-acee48e4.js";import{_ as H}from"./MemberNavBar-cb850db2.js";import{M as K}from"./Modal-326d273c.js";/* empty css                                                                *//* empty css                                                              */const s=g=>(R("data-v-3e3f55d2"),g=g(),T(),g),O={id:"memberProfile-container"},Q={id:"memberProfile-all"},W={id:"memberProfile-Frame"},X=s(()=>e("div",{id:"memberProfile-title"},"會員資料",-1)),Y=["onSubmit"],Z={class:"profile-item"},ee=s(()=>e("label",{class:"item-label"},"帳號：",-1)),te={class:"profile-item"},oe=s(()=>e("label",{class:"item-label"},"電話：",-1)),le=["disabled"],ae={key:0,type:"submit"},se={class:"profile-item"},ne=s(()=>e("label",{class:"item-label"},"姓名：",-1)),ie=["disabled"],ue={key:0,type:"submit"},de={class:"profile-item"},re=s(()=>e("label",{class:"item-label"},"性別：",-1)),ve=["disabled"],ce=s(()=>e("option",{value:"男"},"男",-1)),me=s(()=>e("option",{value:"女"},"女",-1)),_e=s(()=>e("option",{value:"其他"},"其他",-1)),pe=[ce,me,_e],be={key:0,type:"submit"},fe={class:"profile-item"},he=s(()=>e("label",{class:"item-label"},"生日：",-1)),ge={class:"profile-item"},ye=s(()=>e("label",{class:"item-label"},"地址：",-1)),Me=["disabled"],ke={key:0,type:"submit"},we={__name:"MemberProfile",setup(g){const m=x("config"),S=B(),_=l(!1),y=l(""),U=l(""),p=l(""),b=l(""),v=l(""),P=l(""),M=l(""),n=l(!1),i=l(!1),u=l(!1),d=l(!1),C=l(!1),k=o=>{o==="phone"&&(n.value=!n.value),o==="name"&&(i.value=!i.value),o==="gender"&&(u.value=!u.value),o==="address"&&(d.value=!d.value)},N=async()=>{let o;if(C.value){if(n.value&&(console.log({phoneNumber:p.value}),o=await $({phoneNumber:p.value},`${m.apiUrl}/changeMemberInfo`),n.value=!n.value),i.value&&(console.log({name:b.value}),o=await $({name:b.value},`${m.apiUrl}/changeMemberInfo`),i.value=!i.value),u.value){let t;v.value==="男"&&(t="男"),v.value==="女"&&(t="女"),v.value==="其他"&&(t="其他"),o=await $({gender:t},`${m.apiUrl}/changeMemberInfo`),u.value=!u.value}d.value&&(o=await $({address:M.value},`${m.apiUrl}/changeMemberInfo`),d.value=!d.value),o.result===!0&&(y.value="修改成功",_.value=!0),o.result===!1&&(y.value="修改失敗",_.value=!0);return}C.value||(y.value="修改失敗",_.value=!0,S.push({path:"/"}))};return D(async()=>{F().then(o=>{let t=o.isLogin;C.value=t,console.log("%c 登入狀況::","color: red; font-weight: bold",t)}).catch(o=>{console.log("重新讀取")})}),L(async()=>{try{let o=await G(`${m.apiUrl}/memberCenter`);U.value=o.email,p.value=o.phoneNumber,b.value=o.name,v.value=o.gender,P.value=o.birthday,M.value=o.address}catch{console.error()}}),(o,t)=>(c(),f(J,null,[_.value?(c(),A(K,{key:0,onClose:t[0]||(t[0]=a=>_.value=!1)},{default:E(()=>[e("p",null,r(y.value),1)]),_:1})):h("",!0),e("div",O,[e("div",Q,[j(H),e("div",W,[X,e("form",{id:"profile",onSubmit:q(N,["prevent"])},[e("div",Z,[ee,e("span",null,r(U.value),1)]),e("div",te,[oe,w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),disabled:!n.value},null,8,le),[[I,p.value]]),e("button",{type:"button",onClick:t[2]||(t[2]=a=>k("phone"))},r(n.value?"取消":"修改"),1),n.value?(c(),f("button",ae,"保存")):h("",!0)]),e("div",se,[ne,w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>b.value=a),disabled:!i.value},null,8,ie),[[I,b.value]]),e("button",{type:"button",onClick:t[4]||(t[4]=a=>k("name"))},r(i.value?"取消":"修改"),1),i.value?(c(),f("button",ue,"保存")):h("",!0)]),e("div",de,[re,w(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>v.value=a),disabled:!u.value},pe,8,ve),[[z,v.value]]),e("button",{type:"button",onClick:t[6]||(t[6]=a=>k("gender"))},r(u.value?"取消":"修改"),1),u.value?(c(),f("button",be,"保存")):h("",!0)]),e("div",fe,[he,e("span",null,r(P.value),1)]),e("div",ge,[ye,w(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>M.value=a),disabled:!d.value},null,8,Me),[[I,M.value]]),e("button",{type:"button",onClick:t[8]||(t[8]=a=>k("address"))},r(d.value?"取消":"修改"),1),d.value?(c(),f("button",ke,"保存")):h("",!0)])],40,Y)])])])],64))}},Se=V(we,[["__scopeId","data-v-3e3f55d2"]]);export{Se as default};
