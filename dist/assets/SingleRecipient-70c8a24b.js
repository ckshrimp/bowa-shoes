import{i as F,h as $,m as I,r as a,o as N,q as m,K as R,s as T,b as o,c as n,d as e,l as B,w as L,t as s,u as D,F as y,e as b,J as E,B as U,E as V,D as z,v as h,f as C}from"./index-d3cef146.js";import"./store-e74a18d7.js";/* empty css                                                              *//* empty css                                                                */const P=["id"],H={id:"singleOrder-container"},j={id:"singleOrder-all"},J={id:"singleOrder-Big-Frame"},K={class:"singleOrder-title"},W={id:"singleOrder-main-detail-frame"},Y={class:"singleOrder-main-detail"},q={class:"singleOrder-main-detail"},G={class:"singleOrder-main-detail"},X={class:"singleOrder-main-detail"},Z={class:"singleOrder-main-detail"},x={class:"singleOrder-main-detail"},ee={class:"singleOrder-main-detail"},se={class:"singleOrder-main-detail"},te={class:"singleOrder-main-detail"},re={class:"singleOrder-main-detail-big"},ie=z('<div class="singleOrder-title">訂單資料</div><div class="singleOrder-frame-header"><div class="singleOrder-detail singleOrder-detail-header singleOrder-ID">商品名稱</div><div class="singleOrder-detail singleOrder-detail-header singleOrder-price">定價</div><div class="singleOrder-detail singleOrder-detail-header singleOrder-count">數量</div><div class="singleOrder-detail singleOrder-detail-header singleOrder-total">總價</div><div class="singleOrder-detail singleOrder-detail-header singleOrder-status">狀態</div></div>',2),de=["value"],ae={class:"singleOrder-detail singleOrder-ID"},le={class:"singleOrder-productName"},oe={class:"singleOrder-productSize"},ne={class:"singleOrder-detail singleOrder-price"},ce={class:"singleOrder-detail singleOrder-count"},ue={class:"singleOrder-detail singleOrder-total"},ge={class:"singleOrder-detail singleOrder-status"},_e=e("div",{class:"singleOrder-title"},"問與答",-1),ve={id:"singleOrder-QAFrame"},Oe={class:"singleOrder-Message"},me={class:"singleOrder-Message-time"},he=e("br",null,null,-1),pe=["onSubmit"],fe=e("button",{class:"singleOrder-button"},"送出",-1),Me={__name:"SingleRecipient",setup(De){const g=F("config");$();const A=I();a(!1),a("");const d=a({}),_=a([]),v=a([]),c=a(),u=a(null),l=A.params.id,w=(t,r)=>t*r,p=t=>{const r=new Date(t);return`${r.getFullYear()}-${r.getMonth()+1}-${r.getDate()}`},f=t=>{const r=new Date(t);return`${r.getHours()}:${r.getMinutes()}:${r.getSeconds()}`},M=async()=>{try{let t=await m({orderID:l,content:c.value},`${g.apiUrl}/createOrderQA`);t.result&&(v.value=t.QAList,c.value="")}catch(t){console.error("%c 送出問答失敗::::::Error:::","color: red; font-weight: bold",t)}O()},O=()=>{u.value&&u.value.scrollTo(0,u.value.scrollHeight)},S=t=>{if(t===0)return d.value.orderStatus;if(t===1)return"退貨"};return N(async()=>{let t;try{t=await m({orderID:l},`${g.apiUrl}/orderDetail`),d.value=t.orderInfo,_.value=t.productList,console.log(_.value)}catch(r){console.error("%c 讀取訂單失敗::::::Error:::","color: red; font-weight: bold",r)}try{let r=await m({orderID:l},`${g.apiUrl}/orderQAList`);v.value=r.QAList}catch(r){console.error("%c 讀取問答失敗::::::Error:::","color: red; font-weight: bold",r)}O()}),R(()=>{O()}),(t,r)=>{const Q=T("router-link");return o(),n("section",{id:D(l)},[e("div",H,[e("div",j,[B(Q,{to:"/recipient",class:"singleOrder-button singleOrder-back"},{default:L(()=>[h("回到訂單")]),_:1}),e("div",J,[e("div",K,"訂單編號 "+s(D(l)),1),e("div",W,[e("div",Y,"訂單日期: "+s(p(d.value.orderDate))+" "+s(f(d.value.orderDate)),1),e("div",q,"收件人: "+s(d.value.recipientName),1),e("div",G,"收件地址: "+s(d.value.recipientAddress),1),e("div",X,"收件電話: "+s(d.value.recipientPhoneNumber),1),e("div",Z,"運送方式: "+s(d.value.deliveryMethod),1),e("div",x,"訂單狀態: "+s(d.value.orderStatus),1),e("div",ee,"付款方式: "+s(d.value.paymentMethod),1),e("div",se,"總金額: "+s(d.value.total)+" 元",1),e("div",te,"訂單折價: "+s(d.value.discount)+" 折",1),e("div",re,"備註: "+s(d.value.orderRemark),1)]),ie,(o(!0),n(y,null,b(_.value,i=>(o(),n("div",{class:"singleOrder-frame",key:i,value:i},[e("div",ae,[e("div",le,s(i.productName),1),e("div",oe,"尺寸: "+s(i.productSize),1)]),e("div",ne,s(i.currentprice)+"元",1),e("div",ce,s(i.quantity),1),e("div",ue,s(w(i.currentprice,i.quantity))+"元",1),e("div",ge,s(S(i.isReturn)),1)],8,de))),128)),_e,e("div",ve,[e("div",{id:"singleOrder-messageFrame",ref_key:"messageFrame",ref:u},[(o(!0),n(y,null,b(v.value,(i,k)=>(o(),n("div",{key:k,class:C(i.speaker.startsWith("A")?"singleOrder-myMessage":"singleOrder-adminMessage")},[e("div",Oe,s(i.content),1),e("div",me,[h(s(p(i.QATime))+" ",1),he,h(s(f(i.QATime)),1)])],2))),128))],512),e("form",{id:"singleOrder-form",onSubmit:E(M,["prevent"])},[U(e("input",{id:"singleOrder-input","onUpdate:modelValue":r[0]||(r[0]=i=>c.value=i),autocomplete:"off"},null,512),[[V,c.value]]),fe],40,pe)])])])])],8,P)}}};export{Me as default};
