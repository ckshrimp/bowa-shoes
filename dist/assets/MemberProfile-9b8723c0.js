import{_ as V,i as x,h as B,r as l,y as F,z as L,o as E,j,b as c,c as b,k as A,w as G,A as h,d as e,l as q,J as z,t as d,B as w,E as I,C as J,F as R,p as T,g as Y,q as k}from"./index-1c6f3158.js";import{_ as H}from"./MemberNavBar-6bdb8689.js";import{M as K}from"./Modal-728e6302.js";import"./store-09b99b65.js";/* empty css                                                                *//* empty css                                                              */const s=g=>(T("data-v-1f091265"),g=g(),Y(),g),O={id:"memberProfile-container"},Q={id:"memberProfile-all"},W={id:"memberProfile-Frame"},X=s(()=>e("div",{id:"memberProfile-title"},"會員資料",-1)),Z=["onSubmit"],ee={class:"profile-item"},te=s(()=>e("label",{class:"item-label"},"帳號：",-1)),oe={class:"profile-item"},le=s(()=>e("label",{class:"item-label"},"電話：",-1)),ae=["disabled"],se={key:0,type:"submit"},ne={class:"profile-item"},ie=s(()=>e("label",{class:"item-label"},"姓名：",-1)),ue=["disabled"],re={key:0,type:"submit"},de={class:"profile-item"},ve=s(()=>e("label",{class:"item-label"},"性別：",-1)),ce=["disabled"],me=s(()=>e("option",{value:"男"},"男",-1)),pe=s(()=>e("option",{value:"女"},"女",-1)),_e=s(()=>e("option",{value:"其他"},"其他",-1)),fe=[me,pe,_e],be={key:0,type:"submit"},he={class:"profile-item"},ge=s(()=>e("label",{class:"item-label"},"生日：",-1)),ye={class:"profile-item"},Me=s(()=>e("label",{class:"item-label"},"地址：",-1)),$e=["disabled"],we={key:0,type:"submit"},ke={__name:"MemberProfile",setup(g){const m=x("config"),D=B(),p=l(!1),y=l(""),P=l(""),_=l(""),f=l(""),v=l(""),U=l(""),M=l(""),n=l(!1),i=l(!1),u=l(!1),r=l(!1),C=l(!1),$=o=>{o==="phone"&&(n.value=!n.value),o==="name"&&(i.value=!i.value),o==="gender"&&(u.value=!u.value),o==="address"&&(r.value=!r.value)},S=o=>{const t=new Date(o);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`},N=async()=>{let o;if(C.value){if(n.value&&(console.log({phoneNumber:_.value}),o=await k({phoneNumber:_.value},`${m.apiUrl}/changeMemberInfo`),n.value=!n.value),i.value&&(console.log({name:f.value}),o=await k({name:f.value},`${m.apiUrl}/changeMemberInfo`),i.value=!i.value),u.value){let t;v.value==="男"&&(t="男"),v.value==="女"&&(t="女"),v.value==="其他"&&(t="其他"),o=await k({gender:t},`${m.apiUrl}/changeMemberInfo`),u.value=!u.value}r.value&&(o=await k({address:M.value},`${m.apiUrl}/changeMemberInfo`),r.value=!r.value),o.result===!0&&(y.value="修改成功",p.value=!0),o.result===!1&&(y.value="修改失敗",p.value=!0);return}C.value||(y.value="修改失敗",p.value=!0,D.push({path:"/"}))};return F(async()=>{L().then(o=>{let t=o.isLogin;C.value=t,console.log("%c 登入狀況::","color: red; font-weight: bold",t)}).catch(o=>{console.log("重新讀取")})}),E(async()=>{try{let o=await j(`${m.apiUrl}/memberCenter`);P.value=o.email,_.value=o.phoneNumber,f.value=o.name,v.value=o.gender,U.value=S(o.birthday),M.value=o.address}catch{console.error()}}),(o,t)=>(c(),b(R,null,[p.value?(c(),A(K,{key:0,onClose:t[0]||(t[0]=a=>p.value=!1)},{default:G(()=>[e("p",null,d(y.value),1)]),_:1})):h("",!0),e("div",O,[e("div",Q,[q(H),e("div",W,[X,e("form",{id:"memberProfile-profile",onSubmit:z(N,["prevent"])},[e("div",ee,[te,e("span",null,d(P.value),1)]),e("div",oe,[le,w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>_.value=a),disabled:!n.value},null,8,ae),[[I,_.value]]),e("button",{class:"profile-button",type:"button",onClick:t[2]||(t[2]=a=>$("phone"))},d(n.value?"取消":"修改"),1),n.value?(c(),b("button",se,"保存")):h("",!0)]),e("div",ne,[ie,w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>f.value=a),disabled:!i.value},null,8,ue),[[I,f.value]]),e("button",{class:"profile-button",type:"button",onClick:t[4]||(t[4]=a=>$("name"))},d(i.value?"取消":"修改"),1),i.value?(c(),b("button",re,"保存")):h("",!0)]),e("div",de,[ve,w(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>v.value=a),disabled:!u.value},fe,8,ce),[[J,v.value]]),e("button",{class:"profile-button",type:"button",onClick:t[6]||(t[6]=a=>$("gender"))},d(u.value?"取消":"修改"),1),u.value?(c(),b("button",be,"保存")):h("",!0)]),e("div",he,[ge,e("span",null,d(U.value),1)]),e("div",ye,[Me,w(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>M.value=a),disabled:!r.value},null,8,$e),[[I,M.value]]),e("button",{class:"profile-button",type:"button",onClick:t[8]||(t[8]=a=>$("address"))},d(r.value?"取消":"修改"),1),r.value?(c(),b("button",we,"保存")):h("",!0)])],40,Z)])])])],64))}},Ne=V(ke,[["__scopeId","data-v-1f091265"]]);export{Ne as default};
